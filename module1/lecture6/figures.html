<!DOCTYPE html>
<html>
  <head>
    <meta charset='UTF-8'/>
    <script src='../../lib/d3.js'></script>
    <script src='../../lib/analysis.js'></script>
    <script src='../../lib/functions.js'></script>
    <script src='../../lib/tools.js'></script>
    <script src='../../lib/matrix.js'></script>
    <script src='../../lib/graphics.js'></script>
    <script src='../../lib/geometry.js'></script>
    <style>
      body {
	  background:#333;
      }
      svg {
	  border: 1px dotted gray;
      }
    </style>
  </head>
  <body>
    <script>

      ////////////////////////////////////////////////////////////	
      // fig20
      {
	  const trig = ([a,b]) => point([(2*sqrt(3)*b+sqrt(3)*a)/3, a].scale(1/10))
		.option('pointSize',4)
	  let gen = (a,b) => new Group([
	      trig([a,b]),trig([b,a]),
	      trig([a,180-a-b]),trig([180-a-b,a]),
	      trig([b,180-a-b]),trig([180-a-b,b])
	  ])
	  //gen = (a,b) => trig([a,b,180-a-b].sorted().take(2))

	  let s = 18*2/sqrt(3)
	  var ch = new Chart('fig')
	  let t = new Triangle().on(new Segment().extendToLength(s))
	  let eq = new Group([t.median(1), t.median(2), t.median(3)])
	  var rect = new Triangle(trig([90,0]),trig([90,90]),trig([0,90]))
	      .points(false).color('#1e90ff')
	  var ostr = rect.fill('#1e90ff').opacity(0.5).points(false).noline()
	  var tup = new Triangle(trig([90,0]),origin,trig([0,90]))
	      .fill('green').opacity(0.25).points(false).noline();
	  let sample = trig([45,105]);
	  let sampleOrth = new Segment().through(sample).dotted().color('black')
	  samples = new Group([ sampleOrth.parallelTo(t.side(1)).extendToLine(t.side(2))
				, sampleOrth.parallelTo(t.side(2)).extendToLine(t.side(3))
				, sampleOrth.parallelTo(t.side(3)).extendToLine(t.side(1))
				, sample ])
	  scale = new Scale(12, x => x*180, fmt.degree).on(t.side(1)).tickLength(-0.5)
	  let g = new Group([ ostr, tup, rect
			      , tup.superpose(origin, trig([90, 0]))
			      , tup.superpose(origin, trig([0, 90]))
			      , eq
			      , scale, scale.rotate(120).shift([s,0]),
			      , scale.rotate(60).flip()
			      , trig([60, 60])
			      , samples
			      , new Text("равнобедренные").on(t.median(1), 1/7)
			      , new Text("прямоугольные").on(ostr.side(3).flip(), 1/4)
			    ])
	      .superpose(trig([60, 60]), origin).scale(35/18)
	  var title = new Text("пространство углов треугольников")
	  let legend = column([row([ostr.scale(1/4), new Text("остроугольные")]),
			       row([tup.scale(1/4), new Text("тупоугольные")])],-1,2)
	  ch.put(g.boxAlign([-1,1],legend,[-1,1])).adjustSize()
	  
      }   

    </script>
  </body>
</html>	
