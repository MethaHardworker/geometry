<!DOCTYPE html>
<html>
  <head>
    <meta charset='UTF-8'/>
    <script src='../../lib/d3.js'></script>
    <script src='../../lib/analysis.js'></script>
    <script src='../../lib/functions.js'></script>
    <script src='../../lib/tools.js'></script>
    <script src='../../lib/matrix.js'></script>
    <script src='../../lib/graphics.js'></script>
    <script src='../../lib/geometry.js'></script>
    <style>
      body {
	  background:#333;
      }
      svg {
	  border: 1px dotted gray;
      }
    </style>
  </head>
  <body>
    <script>
      ////////////////////////////////////////////////////////////	
      // fig10
      {
	  var r0, r1;
	  var ch10 = new Chart('fig10')
	  var g = new Group([
	      r0 = new Ray()
	      , new Ray().atAngle(-10)
	      , r1 = new Ray().atAngle(30)
	      , new Line().atAngle(110)
	      , new Ray().atAngle(147)
	      , new Ray().atAngle(210)
	      , new Ray().atAngle(270)
	  ])
	  ch10.put(g, origin.option('labelOffset',[1,-1.3]))
      }
      
      ////////////////////////////////////////////////////////////	
      // fig12
      {
	  var ch12 = new Chart('fig12')
	  let p11 = new Point().on(r0,10)
	  let p12 = new Point().on(r0,20)
	  let p21 = new Point().on(r1,10)
	  let p22 = new Point().on(r1,20)
	  let ar2 = seg(p12,p22).arrow('true').dashed().color('wheat')
	  let ar1 = seg(p11,p21).arrow('true').dashed().color('wheat')
	  ch12.put(g, ar1, ar2, p11, p12, p21, p22, origin.option('labelOffset',[1,-1.3]))
      }

      ////////////////////////////////////////////////////////////	
      // fig13
      {
	  var ch13 = new Chart('fig13')
	  var an1 = new Angle(30).label(' ')
	  ch13.put(an1.startRay, an1.endRay, an1, origin.option('labelOffset',[0,-1])).adjustSize()
      }

      ////////////////////////////////////////////////////////////	
      // fig14
      {
	  var ch14 = new Chart('fig14')
	  let tr = new Sector(origin, 25, 0, 30)
	  ch14.put(tr.lineStyle({'stroke':'none'})
		   .fill("skyblue")
		   .opacity(0.4)
		   .points(false)
		   , an1.startRay
		   , an1.endRay
		   , an1
		   , origin).adjustSize()
      }

      ////////////////////////////////////////////////////////////	
      // fig16
      {
	  var ch16 = new Chart('fig16')
	  let A = new Point('A').at([0,0])
	  let B = new Point('B').at([20,0])
	  let C = new Point('C').at([13,0])
	  let s1 = new Segment().joining(A,B)
	  let r0 = new Ray('A')
	  let r1 = new Ray('C').atAngle(50)
	  let r2 = new Ray('B').atAngle(80)
	  let an1 = new Angle('a').between(r0, r1)
	  let an2 = new Angle('b').between(r1, r2)
	  ch16.put(new Group([s1,A,B,C]).shift([0,-7])
		   , new Group([r0,r1,r2,an1, an2, origin])).adjustSize()
      }
      ////////////////////////////////////////////////////////////	
      // fig17
      {
	  var ch17 = new Chart('fig17');
	  let A = new Point('A').at([0,0]);
	  let B = new Point('B').at([20,0]);
	  let s1 = new Segment().joining(A,B);
	  let C = s1.middle.label('C');
	  let r0 = new Ray('A');
	  let r1 = new Ray('C').atAngle(40)
	  let r2 = new Ray('B').atAngle(80)
	  let an1 = new Angle('a').between(r0, r1)
	  let an2 = new Angle('a').between(r1, r2)
	  ch17.put(new Group([s1,A,B,C]).shift([0,-7])
		   , new Group([r0,r1,r2,an1, an2, origin])).adjustSize()
      }
      ////////////////////////////////////////////////////////////	
      // fig17
      {
	  var ch18 = new Chart('fig18');
	  let A = new Point('A').at([0,0]);
	  let B = new Point('B').at([20,0]);
	  let s1 = new Segment().joining(A,B);
	  let C = s1.middle.label('C');
	  let r0 = new Ray('A');
	  let r1 = new Ray('C').atAngle(40)
	  let r2 = new Ray('B').atAngle(80)
	  let an1 = new Angle('a').between(r0, r1)
	  let an2 = new Angle('a').between(r1, r2)
	  ch18.put(new Group([s1,A,B,C]).shift([0,-7])
		   , new Group([r0,r1,r2,an1, an2, origin])).adjustSize()
      }

      ////////////////////////////////////////////////////////////	
      // fig20
      {
	  const trig = ([a,b]) => point([(2*sqrt(3)*b+sqrt(3)*a)/3, a].scale(1/10))
		.option('pointSize',4)
	  let gen = (a,b) => new Group([
	      trig([a,b]),trig([b,a]),
	      trig([a,180-a-b]),trig([180-a-b,a]),
	      trig([b,180-a-b]),trig([180-a-b,b])
	  ])
	  //gen = (a,b) => trig([a,b,180-a-b].sorted().take(2))

	  let s = 18*2/sqrt(3)
	  var ch = new Chart('fig')
	  let t = new Triangle().on(new Segment().extendToLength(s))
	  let eq = new Group([t.median(1), t.median(2), t.median(3)])
	  var rect = new Triangle(trig([90,0]),trig([90,90]),trig([0,90]))
	      .points(false).color('#1e90ff')
	  var ostr = rect.fill('#1e90ff').opacity(0.5).points(false).noline()
	  var tup = new Triangle(trig([90,0]),origin,trig([0,90]))
	      .fill('green').opacity(0.25).points(false).noline();
	  let sample = trig([100,50]);
	  let sampleOrth = new Segment().through(sample).dashed().color('black')
	  samples = new Group([ sampleOrth.heightTo(t.side(1)).label('100')
				.labelPosition(0.4)
				, sampleOrth.heightTo(t.side(2)).label('30')
				, sampleOrth.heightTo(t.side(3)).label('50')
				, sample ])
	  scale = new Scale(3, x => x*180).on(t.side(1)).setOrientation(-1)
	  let g = new Group([ ostr, tup, rect
			      , tup.superpose(origin, trig([90, 0]))
			      , tup.superpose(origin, trig([0, 90]))
			      , eq
			      , scale
			      , trig([60, 60])
			      , samples
			      , new Text("равнобедренные").on(t.median(1), 1/7)
			      , new Text("прямоугольные").on(ostr.side(3).flip(), 1/4)
			    ])
	      .superpose(trig([60, 60]), origin).scale(35/18)
	  var title = new Text("пространство углов треугольников")
	  let legend = column([row([trig([60, 60]), new Text("равносторонний")],0,2),
			       row([ostr.scale(1/4), new Text("остроугольные")]),
			       row([tup.scale(1/4), new Text("тупоугольные")])],1,2)
	  ch.put(g.boxAlign([1,1],legend,[1,1])).adjustSize()
	  
      }   

    </script>
  </body>
</html>	
